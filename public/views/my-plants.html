<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Planta â€“ My Plants</title>
    <link rel="stylesheet" type="text/css" href="public/styles/main.css" />
    <link rel="stylesheet" type="text/css" href="public/styles/my-plants.css" />
  </head>
  <body>
    <!-- TOP NAVBAR (SAME STRUCTURE AS LOGIN/DASHBOARD) -->
    <header class="top-nav">
      <div class="nav-left">
        <div class="logo-mark"></div>
        <span class="logo-text">Planta</span>
      </div>

      <nav class="nav-right">
        <a href="/dashboard">Dashboard</a>
        <a href="/my-plants" class="nav-link-active">My Plants</a>
        <a href="/calendar">Calendar</a>
        <a href="/settings">Settings</a>
        <a href="/logout" class="nav-signup">Log out</a>
      </nav>
    </header>

    <main class="my-plants-layout">
      <!-- HEADER -->
      <section class="my-plants-header">
        <div>
          <h1 class="my-plants-title">My plants</h1>
          <p class="my-plants-subtitle">
            Manage your collection, add new plants and keep all care info in one
            place.
          </p>
        </div>

        <!-- OPTIONAL: STATS, LATER FROM DB -->
        <div class="my-plants-stats">
          <div class="stats-pill">
            <span class="stats-label">Total plants</span>
            <!-- TODO: echo count($plants) -->
            <span class="stats-value">12</span>
          </div>
          <div class="stats-pill">
            <span class="stats-label">Need care today</span>
            <!-- TODO: echo $careTodayCount -->
            <span class="stats-value">4</span>
          </div>
        </div>
      </section>

      <!-- BODY: LEFT = FORM, RIGHT = COLLECTION -->
      <section class="my-plants-body">
        <!-- ADD / EDIT PLANT FORM -->
        <section class="card my-plants-form-card" id="add">
          <h2 class="card-title">Add a new plant</h2>
          <p class="card-description">
            Save basic information so we can remind you when it needs care.
          </p>

          <!-- TODO: action & handling in controller -->
          <form action="/my-plants" method="POST" class="plant-form">
            <label class="field">
              <span class="field-label">Name</span>
              <input
                type="text"
                name="name"
                placeholder="e.g. Living room Monstera"
                required
              />
            </label>

            <label class="field">
              <span class="field-label">Species</span>
              <input
                type="text"
                name="species"
                placeholder="e.g. Monstera deliciosa"
              />
            </label>

            <label class="field">
              <span class="field-label">Location</span>
              <input
                type="text"
                name="location"
                placeholder="e.g. Living room, north window"
              />
            </label>

            <div class="field-row">
              <label class="field">
                <span class="field-label">Watering</span>
                <select name="watering_interval">
                  <option value="">Choose frequency</option>
                  <option value="3">Every 3 days</option>
                  <option value="7">Every week</option>
                  <option value="14">Every 2 weeks</option>
                  <option value="30">Once a month</option>
                </select>
              </label>

              <label class="field">
                <span class="field-label">Light</span>
                <select name="light_level">
                  <option value="">Choose light</option>
                  <option value="low">Low light</option>
                  <option value="medium">Medium light</option>
                  <option value="bright">Bright, indirect</option>
                  <option value="full">Full sun</option>
                </select>
              </label>
            </div>

            <label class="field">
              <span class="field-label">Notes</span>
              <textarea
                name="notes"
                rows="3"
                placeholder="Special care tips, sensitivity, etc."
              ></textarea>
            </label>

            <!-- PLACE FOR ERRORS/SUCCESS MESSAGES -->
            <?php if (!empty($messages)): ?>
            <?php foreach ($messages as $message): ?>
            <p class="error"><?= htmlspecialchars($message) ?></p>
            <?php endforeach; ?>
            <?php endif; ?>

            <?php if (!empty($success)): ?>
            <?php foreach ($success as $message): ?>
            <p class="success"><?= htmlspecialchars($message) ?></p>
            <?php endforeach; ?>
            <?php endif; ?>

            <button type="submit" class="btn-primary">Save plant</button>
          </form>
        </section>

        <!-- PLANTS COLLECTION -->
        <section class="card my-plants-collection-card">
          <header class="collection-header">
            <div>
              <h2 class="card-title">Your collection</h2>
              <p class="card-description">
                Browse all your plants, check last care and remove ones you no
                longer track.
              </p>
            </div>

            <!-- SIMPLE FILTER BAR (DRY) -->
            <form class="collection-filters" method="GET" action="/my-plants">
              <input
                type="text"
                name="q"
                placeholder="Search by name or species"
                class="filter-search"
              />
              <select name="filter_light" class="filter-select">
                <option value="">All light levels</option>
                <option value="low">Low light</option>
                <option value="medium">Medium</option>
                <option value="bright">Bright</option>
                <option value="full">Full sun</option>
              </select>
              <select name="filter_status" class="filter-select">
                <option value="">Any status</option>
                <option value="today">Care today</option>
                <option value="overdue">Overdue</option>
                <option value="ok">All good</option>
              </select>
              <button type="submit" class="filter-button">Filter</button>
            </form>
          </header>

          <!-- PLANT LIST -->
          <div class="plants-grid">
            <!-- TODO: loop over $plants from DB -->
            <!-- EXAMPLE ITEM -->
            <article class="plant-card">
              <div class="plant-card-main">
                <div>
                  <h3 class="plant-card-name">Monstera deliciosa</h3>
                  <p class="plant-card-species">Species: Monstera deliciosa</p>
                  <p class="plant-card-location">
                    Location: Living room, east window
                  </p>
                </div>

                <div class="plant-card-meta">
                  <div class="meta-row">
                    <span class="meta-label">Watering</span>
                    <span class="meta-value">Every 7 days</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">Light</span>
                    <span class="meta-value">Bright, indirect</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">Last watered</span>
                    <span class="meta-value">3 days ago</span>
                  </div>
                  <div class="meta-row">
                    <span class="meta-label">Next care</span>
                    <span class="meta-value meta-highlight">Today</span>
                  </div>
                </div>
              </div>

              <div class="plant-card-actions">
                <!-- TODO: link to edit view if you add one -->
                <a href="/my-plants/edit?id=1" class="link-ghost">Edit</a>

                <!-- TODO: handle delete in controller -->
                <form
                  action="/my-plants/delete"
                  method="POST"
                  class="delete-form"
                  onsubmit="return confirm('Delete this plant?');"
                >
                  <input type="hidden" name="id" value="1" />
                  <button type="submit" class="btn-danger">Delete</button>
                </form>
              </div>
            </article>

            <!-- Copy the <article> block in a PHP loop:
            <?php foreach ($plants as $plant): ?>
              ... echo data here ...
            <?php endforeach; ?>
            -->
          </div>
        </section>
      </section>
    </main>
  </body>
</html>
